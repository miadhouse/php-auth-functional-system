!function(t,n,i){function s(s,e){this.elem=s,this.$elem=t(s),this.options=e,this.metadata=this.$elem.data("plugin-options"),this.$win=t(n),this.sections={},this.didScroll=!1,this.$doc=t(i),this.docHeight=this.$doc.height()}s.defaults=(s.prototype={defaults:{navItems:"a",currentClass:"current",changeHash:!1,easing:"swing",filter:"",scrollSpeed:750,scrollThreshold:.5,begin:!1,end:!1,scrollChange:!1},init:function(){return this.config=t.extend({},this.defaults,this.options,this.metadata),this.$nav=this.$elem.find(this.config.navItems),""!==this.config.filter&&(this.$nav=this.$nav.filter(this.config.filter)),this.$nav.on("click.onePageNav",t.proxy(this.handleClick,this)),this.getPositions(),this.bindInterval(),this.$win.on("resize.onePageNav",t.proxy(this.getPositions,this)),this},adjustNav:function(t,n){t.$elem.find("."+t.config.currentClass).removeClass(t.config.currentClass),n.addClass(t.config.currentClass)},bindInterval:function(){var t,n=this;n.$win.on("scroll.onePageNav",(function(){n.didScroll=!0})),n.t=setInterval((function(){t=n.$doc.height(),n.didScroll&&(n.didScroll=!1,n.scrollChange()),t!==n.docHeight&&(n.docHeight=t,n.getPositions())}),250)},getHash:function(t){return t.attr("href").split("#")[1]},getPositions:function(){var n,i,s=this;s.$nav.each((function(){n=s.getHash(t(this)),(i=t("#"+n)).length&&(i=i.offset().top,s.sections[n]=Math.round(i))}))},getSection:function(t){var n,i=null,s=Math.round(this.$win.height()*this.config.scrollThreshold);for(n in this.sections)this.sections[n]-s<t&&(i=n);return i},handleClick:function(i){var s=this,e=t(i.currentTarget),o=e.parent(),a="#"+s.getHash(e);o.hasClass(s.config.currentClass)||(s.config.begin&&s.config.begin(),s.adjustNav(s,o),s.unbindInterval(),s.scrollTo(a,(function(){s.config.changeHash&&(n.location.hash=a),s.bindInterval(),s.config.end&&s.config.end()}))),i.preventDefault()},scrollChange:function(){var t=this.$win.scrollTop();null===(t=this.getSection(t))||(t=this.$elem.find('a[href$="#'+t+'"]').parent()).hasClass(this.config.currentClass)||(this.adjustNav(this,t),this.config.scrollChange&&this.config.scrollChange(t))},scrollTo:function(n,i){n=t(n).offset().top-80,t("html, body").animate({scrollTop:n},this.config.scrollSpeed,this.config.easing,i)},unbindInterval:function(){clearInterval(this.t),this.$win.unbind("scroll.onePageNav")}}).defaults,t.fn.onePageNav=function(t){return this.each((function(){new s(this,t).init()}))}}(jQuery,window,document);